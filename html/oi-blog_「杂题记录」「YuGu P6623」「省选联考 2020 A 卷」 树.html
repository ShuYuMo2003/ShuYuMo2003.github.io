<!-- Academic Blog Template
MIT License - Copyright (c) 2025 Su Jiayi <sujiayi2003@gmail.com>
-->

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        
        <!-- Primary Meta Tags -->
        <title>ShuYuMo&#39;s Blog | Jiayi Su</title>
        <meta name="description" content="一些奇奇怪怪的 INFP 随碎碎念。">
        <meta name="keywords" content="nb1, nb2, nb3">
        <meta name="author" content="Su Jiayi">
        
        <!-- Open Graph Meta Tags -->
        <meta property="og:type" content="website">
        <meta property="og:title" content="ShuYuMo&#39;s Blog | Jiayi Su">
        <meta property="og:description" content="一些奇奇怪怪的 INFP 随碎碎念。">
        <meta property="og:image" content="../static/images/header.jpg">
        
        <!-- Stylesheets -->
        <link rel="stylesheet" type="text/css" href="../static/css/default.css">
        <link rel="stylesheet" type="text/css" href="../static/css/syntax.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
        
        <!-- Google Analytics -->
        
    </head>
    <body>
        <!-- Skip to main content for accessibility -->
        <a href="#main-content" class="skip-link">Skip to main content</a>
        
        <div id="main">
            <div class="main-container">
                <!-- Header -->
                <header id="header">
                    <div class="header-content">
                        <h1 class="header-title">
                            <a href="./">ShuYuMo&#39;s Blog</a>
                        </h1>
                        <p class="header-subtitle">一些奇奇怪怪的 INFP 随碎碎念。</p>
                        <div class="header-accent"></div>
                    </div>
                </header>
                
                <!-- Content Layout -->
                <div class="content-wrapper">
                    <!-- Sidebar -->
                    <nav id="sidebar">
                        <div class="profile-section">
                            <a href="./" class="profile-avatar-link">
                                <img src="../static/images/header.jpg" alt="ShuYuMo&#39;s header" class="profile-avatar" loading="lazy" />
                            </a>
                            <div class="profile-info">
                                <h3 class="profile-name">Jiayi Su (ShuYuMo)</h3>
            </div>
            </div>

                        <div class="nav-header">
                            <h2>🧭 Navigation</h2>
                            <span class="nav-subtitle">Explore the site</span>
                        </div>
                        <nav class="nav-menu">
                            
                            
                            <a href="./_post.html" 
                               
                               class="nav-item">
                                <span class="nav-icon">📄</span>
                                <span class="nav-text">Posts</span>
                                
                            </a>
                            
                            
                            <a href="./_archive.html" 
                               
                               class="nav-item">
                                <span class="nav-icon">📄</span>
                                <span class="nav-text">Archive</span>
                                
                            </a>
                            
                            
                            <a href="./_category.html" 
                               
                               class="nav-item">
                                <span class="nav-icon">📄</span>
                                <span class="nav-text">Category</span>
                                
                            </a>
                            
                            
                            <a href="./_about.html" 
                               
                               class="nav-item">
                                <span class="nav-icon">📄</span>
                                <span class="nav-text">About</span>
                                
                            </a>
                            
                        </nav>
                    </nav>

                    <!-- Main Content -->
                    <main id="content">
                        <div id="main-content">
                            
                                <article>
                                    <!-- Article Header with Title and Actions -->
                                    <div class="article-header">
                                        <div class="article-title-section">
                                            
                                                <h1 class="article-title">「杂题记录」「YuGu P6623」「省选联考 2020 A 卷」 树</h1>
                                            
                                            
                                            <!-- Article Meta Information -->
                                            <div class="article-meta">
                                                
                                                    <div class="meta-item">
                                                        <span class="meta-icon">📅</span>
                                                        <span class="meta-label">Last Updated: </span>
                                                        <span class="meta-value">2020-07-10</span>
                                                    </div>
                                                
                                                
                                                
                                                    <div class="meta-item">
                                                        <span class="meta-icon">📊</span>
                                                        <span class="meta-label">Word Count: </span>
                                                        <span class="meta-value">693</span>
                                                    </div>
                    

                                                
                                                    <div class="meta-item">
                                                        <span class="meta-icon">⏱️</span>
                                                        <span class="meta-label">Estimated Reading Time: </span>
                                                        <span class="meta-value">5 minutes</span>
                                                    </div>
                                                
                                            </div>
                                        </div>
                                        
                                        <div class="article-actions">
                    
                                                <a href="../pdf/oi-blog_「杂题记录」「YuGu P6623」「省选联考 2020 A 卷」 树.pdf" 
                                                   target="_blank" 
                                                   rel="noopener"
                                                   class="action-btn pdf-btn">
                                                    📄 PDF
                                                </a>
                                            
                                            
                                            
                                                <a href="../src/oi-blog/「杂题记录」「YuGu P6623」「省选联考 2020 A 卷」 树.md" 
                                                   target="_blank" 
                                                   rel="noopener"
                                                   class="action-btn source-btn">
                                                    📝 Source
                                                </a>
                                            
                                        </div>
                                    </div>

                                    <!-- Article Content -->
                                    <div class="article-content">
                                        <p>给定一棵
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>
个结点的有根树
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>
，结点从
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>
开始编号，根结点为
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>
号结点，每个结点有一个正整数权值
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">v_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>
。</p>
<p>设
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>
号结点的子树内（包含
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>
自身）的所有结点编号为
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>c</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>c</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">c_1,c_2,\dots,c_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>
，定义
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>
的价值为：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><msub><mi>v</mi><msub><mi>c</mi><mn>1</mn></msub></msub><mo>+</mo><mi>d</mi><mo stretchy="false">(</mo><msub><mi>c</mi><mn>1</mn></msub><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>⊕</mo><mo stretchy="false">(</mo><msub><mi>v</mi><msub><mi>c</mi><mn>2</mn></msub></msub><mo>+</mo><mi>d</mi><mo stretchy="false">(</mo><msub><mi>c</mi><mn>2</mn></msub><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>⊕</mo><mo>⋯</mo><mo>⊕</mo><mo stretchy="false">(</mo><msub><mi>v</mi><msub><mi>c</mi><mi>k</mi></msub></msub><mo>+</mo><mi>d</mi><mo stretchy="false">(</mo><msub><mi>c</mi><mi>k</mi></msub><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">val(x)=(v_{c_1}+d(c_1,x)) \oplus (v_{c_2}+d(c_2,x)) \oplus \cdots \oplus (v_{c_k}+d(c_k, x))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0001em;vertical-align:-0.2501em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0001em;vertical-align:-0.2501em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0059em;vertical-align:-0.2559em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2559em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mclose">))</span></span></span></span>
其中
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>
。</p>
<p>表示树上
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>
号结点与
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>
号结点间唯一简单路径所包含的边数，
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">d(x,x) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>
。
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⊕</mo></mrow><annotation encoding="application/x-tex">\oplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">⊕</span></span></span></span>
表示异或运算。</p>
<p>请你求出
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>v</mi><mi>a</mi><mi>l</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum\limits_{i=1}^n val(i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3291em;vertical-align:-0.9777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3514em;"><span style="top:-2.1223em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop op-symbol small-op">∑</span></span></span><span style="top:-3.95em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span></span></span></span>
的结果。</p>
<!-- more -->
<p>考虑每个结点对其所有祖先的贡献。 每个结点建立
trie，初始先只存这个结点的权值，然后从底向上合并每个儿子结点上的
trie，然后再全局加一，完成后统计答案。</p>
<h2 id="全局加一维护异或和">全局加一（维护异或和）</h2>
<p>这个不太好表述啊~<br />
<code>01-trie数</code> 是指字符集为
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{0,1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span>
的 Trie 树。<br />
<code>01-trie树</code>可以用来维护一堆数字的异或和，支持修改（删除+重新插入），和全部维护值加一。</p>
<p>如果要维护异或和，需要按值从低位到高位建立<code>trie</code>。</p>
<p><strong>一个约定</strong>：文中说当前节点<strong>往上</strong>指当前节点到根这条路径，当前节点<strong>往下</strong>指当前结点的子树。</p>
<h3 id="插入删除">插入&amp;删除</h3>
<p>如果要维护异或和，我们只需要知道某一位上<code>0</code>和<code>1</code>个数的奇偶性即可，也就是对于数字<code>1</code>来说，当且仅当这一位上数字<code>1</code>的个数为奇数时，这一位上的数字才是<code>1</code>。</p>
<p>对于每一个节点，我们需要记录以下三个量： -
<code>ch[o][0/1]</code>指节点<code>o</code>的两个儿子，<code>ch[o][0]</code>指下一位是<code>0</code>，同理<code>ch[o][1]</code>指下一位是<code>0</code>。
-
<code>w[o]</code>指节点<code>o</code>到其父亲节点这条边上数值的数量（权值）。每插入一个数字<code>x</code>，<code>x</code>二进制拆分后在
<code>trie</code>树上 路径的权值都会<code>+1</code>。 -
<code>xorv[o]</code>指以<code>o</code>为根的子树维护的异或和。</p>
<p>具体维护结点的代码如下所示。</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> maintain<span class="op">(</span><span class="dt">int</span> o<span class="op">){</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>        w<span class="op">[</span>o<span class="op">]</span> <span class="op">=</span> xorv<span class="op">[</span>o<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">]){</span> w<span class="op">[</span>o<span class="op">]</span> <span class="op">+=</span> w<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">]];</span> xorv<span class="op">[</span>o<span class="op">]</span> <span class="op">^=</span>  xorv<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">]]</span> <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">]){</span> w<span class="op">[</span>o<span class="op">]</span> <span class="op">+=</span> w<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">]];</span> xorv<span class="op">[</span>o<span class="op">]</span> <span class="op">^=</span> <span class="op">(</span>xorv<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">]]</span> <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">|</span> <span class="op">(</span>w<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">]]</span> <span class="op">&amp;</span> <span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">//w[o] = w[o] &amp; 1;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">//只需知道奇偶性即可，不需要具体的值。当然这句话删掉也可以，因为上文就只利用了他的奇偶性。</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>插入和删除的代码非常相似。</p>
<p>需要注意的地方就是：</p>
<ul>
<li><p>这里的<code>MAXH</code>指<code>trie</code>的深度，也就是强制让每一个叶子节点到根的距离为<code>MAXH</code>。对于一些比较小的值，可能有时候不需要建立这么深（例如：如果插入数字<code>4</code>，分解成二进制后为<code>100</code>，
从根开始插入<code>001</code>这三位即可），但是我们强制插入<code>MAXH</code>位。这样做的目的是为了便于全局<code>+1</code>时处理进位。例如：如果原数字是<code>3</code>（<code>11</code>），++之后变成<code>4</code>（<code>100</code>），如果当初插入<code>3</code>时只插入了<code>2</code>位，那这里的进位就没了。</p></li>
<li><p>插入和删除，只需要修改叶子节点的<code>w[]</code>即可，在回溯的过程中一路维护即可。</p></li>
</ul>
<div class="sourceCode" id="cb2"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> trie<span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">const</span> <span class="dt">int</span> MAXH <span class="op">=</span> <span class="dv">21</span><span class="op">;</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ch<span class="op">[</span>_ <span class="op">*</span> <span class="op">(</span>MAXH <span class="op">+</span> <span class="dv">1</span><span class="op">)][</span><span class="dv">2</span><span class="op">],</span> w<span class="op">[</span>_ <span class="op">*</span> <span class="op">(</span>MAXH <span class="op">+</span> <span class="dv">1</span><span class="op">)],</span> xorv<span class="op">[</span>_ <span class="op">*</span> <span class="op">(</span>MAXH <span class="op">+</span> <span class="dv">1</span><span class="op">)];</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> tot <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> mknode<span class="op">(){</span> <span class="op">++</span>tot<span class="op">;</span> ch<span class="op">[</span>tot<span class="op">][</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> ch<span class="op">[</span>tot<span class="op">][</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> w<span class="op">[</span>tot<span class="op">]</span> <span class="op">=</span> xorv<span class="op">[</span>tot<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">return</span> tot<span class="op">;}</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> maintain<span class="op">(</span><span class="dt">int</span> o<span class="op">){</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        w<span class="op">[</span>o<span class="op">]</span> <span class="op">=</span> xorv<span class="op">[</span>o<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">]){</span> w<span class="op">[</span>o<span class="op">]</span> <span class="op">+=</span> w<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">]];</span> xorv<span class="op">[</span>o<span class="op">]</span> <span class="op">^=</span>  xorv<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">]]</span> <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">]){</span> w<span class="op">[</span>o<span class="op">]</span> <span class="op">+=</span> w<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">]];</span> xorv<span class="op">[</span>o<span class="op">]</span> <span class="op">^=</span> <span class="op">(</span>xorv<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">]]</span> <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">|</span> <span class="op">(</span>w<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">]]</span> <span class="op">&amp;</span> <span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        w<span class="op">[</span>o<span class="op">]</span> <span class="op">=</span> w<span class="op">[</span>o<span class="op">]</span> <span class="op">&amp;</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> insert<span class="op">(</span><span class="dt">int</span> <span class="op">&amp;</span>o<span class="op">,</span> <span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> dp<span class="op">){</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(!</span>o<span class="op">)</span> o <span class="op">=</span> mknode<span class="op">();</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>dp <span class="op">&gt;</span> MAXH<span class="op">)</span> <span class="cf">return</span> <span class="op">(</span><span class="dt">void</span><span class="op">)(</span>w<span class="op">[</span>o<span class="op">]</span> <span class="op">++);</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        insert<span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span> x<span class="op">&amp;</span><span class="dv">1</span> <span class="op">],</span> x <span class="op">&gt;&gt;</span> <span class="dv">1</span><span class="op">,</span> dp <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        maintain<span class="op">(</span>o<span class="op">);</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="全局加一">全局加一</h3>
<div class="sourceCode" id="cb3"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> addall<span class="op">(</span><span class="dt">int</span> o<span class="op">){</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">],</span> ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">]);</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span><span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">])</span> addall<span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    maintain<span class="op">(</span>o<span class="op">);</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>不知道你能不能直接看懂呢？</p>
<p>我们思考一下二进制意义下<code>+1</code>是如何操作的。</p>
<p>我们只需要从低位到高位开始找第一个出现的<code>0</code>，把它变成<code>1</code>，然后这个位置后面的<code>1</code>都变成<code>0</code>即可。</p>
<p>下面给出几个例子感受一下。（括号内的数字表示其对应的十进制数字）</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1000</span>  <span class="op">(</span><span class="dv">10</span><span class="op">)</span>   <span class="op">+</span> <span class="dv">1</span> <span class="op">=</span> <span class="dv">1001</span>   <span class="op">(</span><span class="dv">11</span><span class="op">)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="dv">10011</span> <span class="op">(</span><span class="dv">19</span><span class="op">)</span>   <span class="op">+</span> <span class="dv">1</span> <span class="op">=</span> <span class="dv">10100</span>  <span class="op">(</span><span class="dv">20</span><span class="op">)</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="dv">11111</span> <span class="op">(</span><span class="dv">31</span><span class="op">)</span>   <span class="op">+</span> <span class="dv">1</span> <span class="op">=</span> <span class="dv">100000</span> <span class="op">(</span><span class="dv">32</span><span class="op">)</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="dv">10101</span> <span class="op">(</span><span class="dv">21</span><span class="op">)</span>   <span class="op">+</span> <span class="dv">1</span> <span class="op">=</span> <span class="dv">10110</span>  <span class="op">(</span><span class="dv">22</span><span class="op">)</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="dv">100000000111111</span><span class="op">(</span><span class="dv">16447</span><span class="op">)</span> <span class="op">+</span> <span class="dv">1</span> <span class="op">=</span> <span class="dv">100000001000000</span><span class="op">(</span><span class="dv">16448</span><span class="op">)</span></span></code></pre></div>
<p>回顾一下<code>w[o]</code>的定义：<code>w[o]</code>指节点<code>o</code>到其父亲节点这条边上数值的数量（权值）。</p>
<p>有没有感觉这个定义有点怪呢？如果在父亲结点存储到两个儿子的这条边的边权也许会更接近于习惯。但是在这里，在交换左右儿子的时候，在儿子结点存储到父亲这条边的距离，显然更加方便。</p>
<h1 id="code">Code</h1>
<div class="sourceCode" id="cb5"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> trie<span class="op">{</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">const</span> <span class="dt">int</span> _n <span class="op">=</span> _ <span class="op">*</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> rt<span class="op">[</span>_<span class="op">];</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ch<span class="op">[</span>_n<span class="op">][</span><span class="dv">2</span><span class="op">];</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> w<span class="op">[</span>_n<span class="op">];</span> </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> xorv<span class="op">[</span>_n<span class="op">];</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">// w[i] is in order to save the weight of edge which is connect `i` and its `parent`.</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> tot <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> maintain<span class="op">(</span><span class="dt">int</span> o<span class="op">){</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        w<span class="op">[</span>o<span class="op">]</span> <span class="op">=</span> xorv<span class="op">[</span>o<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">]){</span> w<span class="op">[</span>o<span class="op">]</span> <span class="op">+=</span> w<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">]];</span> xorv<span class="op">[</span>o<span class="op">]</span> <span class="op">^=</span>  xorv<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">]]</span> <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">]){</span> w<span class="op">[</span>o<span class="op">]</span> <span class="op">+=</span> w<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">]];</span> xorv<span class="op">[</span>o<span class="op">]</span> <span class="op">^=</span> <span class="op">(</span>xorv<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">]]</span> <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">|</span> <span class="op">(</span>w<span class="op">[</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">]]</span> <span class="op">&amp;</span> <span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">inline</span> <span class="dt">int</span> mknode<span class="op">(){</span> <span class="op">++</span>tot<span class="op">;</span> ch<span class="op">[</span>tot<span class="op">][</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> ch<span class="op">[</span>tot<span class="op">][</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> w<span class="op">[</span>tot<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">return</span> tot<span class="op">;</span> <span class="op">}</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> insert<span class="op">(</span><span class="dt">int</span> <span class="op">&amp;</span>o<span class="op">,</span> <span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> dp<span class="op">){</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(!</span>o<span class="op">)</span> o <span class="op">=</span> mknode<span class="op">();</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>dp <span class="op">&gt;</span> <span class="dv">20</span><span class="op">)</span> <span class="cf">return</span> <span class="op">(</span><span class="dt">void</span><span class="op">)(</span>w<span class="op">[</span>o<span class="op">]</span> <span class="op">++);</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co">//        if(dp == 0)cerr &lt;&lt; &quot;New start&quot; &lt;&lt; endl;</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co">//        cerr &lt;&lt; &quot;inserted &quot; &lt;&lt; (x&amp;1) &lt;&lt; endl;</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>        insert<span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span> x<span class="op">&amp;</span><span class="dv">1</span> <span class="op">],</span> x <span class="op">&gt;&gt;</span> <span class="dv">1</span><span class="op">,</span> dp <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>        maintain<span class="op">(</span>o<span class="op">);</span> </span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co">//      cerr &lt;&lt; w[o] &lt;&lt; endl;</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> erase<span class="op">(</span><span class="dt">int</span> o<span class="op">,</span> <span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> dp<span class="op">){</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>dp <span class="op">&gt;</span> <span class="dv">20</span><span class="op">)</span> <span class="cf">return</span> <span class="op">(</span><span class="dt">void</span> <span class="op">)(</span>w<span class="op">[</span>o<span class="op">]--);</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>        erase<span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span> x<span class="op">&amp;</span><span class="dv">1</span> <span class="op">],</span> x <span class="op">&gt;&gt;</span> <span class="dv">1</span><span class="op">,</span> dp <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>        maintain<span class="op">(</span>o<span class="op">);</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> addall<span class="op">(</span><span class="dt">int</span> o<span class="op">){</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>        swap<span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">1</span><span class="op">],</span> ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">])</span> addall<span class="op">(</span>ch<span class="op">[</span>o<span class="op">][</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>        maintain<span class="op">(</span>o<span class="op">);</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> head<span class="op">[</span>_<span class="op">];</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> edges<span class="op">{</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> node<span class="op">;</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> nxt<span class="op">;</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>edge<span class="op">[</span>_ <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> tot <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> add<span class="op">(</span><span class="dt">int</span> u<span class="op">,</span> <span class="dt">int</span> v<span class="op">){</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>    edge<span class="op">[++</span>tot<span class="op">].</span>nxt <span class="op">=</span> head<span class="op">[</span>u<span class="op">];</span></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>    head<span class="op">[</span>u<span class="op">]</span> <span class="op">=</span> tot<span class="op">;</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>    edge<span class="op">[</span>tot<span class="op">].</span>node <span class="op">=</span> v<span class="op">;</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> n<span class="op">,</span> m<span class="op">;</span></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> rt<span class="op">;</span></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> lztar<span class="op">[</span>_<span class="op">];</span></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fa<span class="op">[</span>_<span class="op">];</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> dfs0<span class="op">(</span><span class="dt">int</span> o<span class="op">,</span> <span class="dt">int</span> f<span class="op">){</span></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>    fa<span class="op">[</span>o<span class="op">]</span> <span class="op">=</span> f<span class="op">;</span></span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> head<span class="op">[</span>o<span class="op">];</span>i<span class="op">;</span>i <span class="op">=</span> edge<span class="op">[</span>i<span class="op">].</span>nxt<span class="op">){</span></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> node <span class="op">=</span> edge<span class="op">[</span>i<span class="op">].</span>node<span class="op">;</span></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>node <span class="op">==</span> f<span class="op">)</span> <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>        dfs0<span class="op">(</span>node<span class="op">,</span> o<span class="op">);</span></span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> V<span class="op">[</span>_<span class="op">];</span></span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a><span class="kw">inline</span> <span class="dt">int</span> get<span class="op">(</span><span class="dt">int</span> x<span class="op">){</span> <span class="cf">return</span> <span class="op">(</span>fa<span class="op">[</span>x<span class="op">]</span> <span class="op">==</span> <span class="op">-</span><span class="dv">1</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> lztar<span class="op">[</span>fa<span class="op">[</span>x<span class="op">]])</span> <span class="op">+</span> V<span class="op">[</span>x<span class="op">];</span> <span class="op">}</span></span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef LOCAL_JUDGE</span></span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a><span class="co">//    freopen(&quot;in.in&quot;, &quot;r&quot;, stdin);</span></span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a><span class="co">//    freopen(&quot;out.txt&quot;, &quot;w&quot;, stdout);</span></span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a><span class="co">//  freopen(&quot;in.in&quot;, &quot;r&quot;, stdin);</span></span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>    <span class="dt">clock_t</span> c1 <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> read<span class="op">(),</span> m <span class="op">=</span> read<span class="op">();</span></span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span>i <span class="op">&lt;</span> n<span class="op">;</span>i<span class="op">++){</span></span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> u <span class="op">=</span> read<span class="op">(),</span> v <span class="op">=</span> read<span class="op">();</span> <span class="co">//read();</span></span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>        add<span class="op">(</span>u<span class="op">,</span> v<span class="op">);</span> add<span class="op">(</span>rt <span class="op">=</span> v<span class="op">,</span> u<span class="op">);</span></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a><span class="co">//    show(rt);</span></span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a>    dfs0<span class="op">(</span>rt<span class="op">,</span> <span class="op">-</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span>i <span class="op">&lt;=</span> n<span class="op">;</span>i<span class="op">++)</span> <span class="op">{</span> V<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> read<span class="op">();</span> <span class="cf">if</span><span class="op">(</span>fa<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span>trie<span class="op">::</span>insert<span class="op">(</span>trie<span class="op">::</span>rt<span class="op">[</span>fa<span class="op">[</span>i<span class="op">]],</span> V<span class="op">[</span>i<span class="op">],</span> <span class="dv">0</span><span class="op">);</span>  <span class="op">}</span></span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a><span class="co">//    puts(&quot;OK&quot;);</span></span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span><span class="op">(</span>m<span class="op">--){</span></span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> opt <span class="op">=</span> read<span class="op">(),</span> x <span class="op">=</span> read<span class="op">();</span> <span class="co">//cerr &lt;&lt; &quot;opt = &quot; &lt;&lt; opt &lt;&lt; endl;</span></span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a><span class="co">//        if(get(x) &lt; 0) puts(&quot;data error&quot;);</span></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>opt <span class="op">==</span> <span class="dv">1</span><span class="op">){</span></span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>            lztar<span class="op">[</span>x<span class="op">]</span> <span class="op">++;</span> <span class="co">//cerr &lt;&lt; &quot;add lztar[ &quot; &lt;&lt; x &lt;&lt; &quot; ]&quot; &lt;&lt; endl;</span></span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span><span class="op">(</span>x <span class="op">!=</span> rt<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span><span class="op">(</span>fa<span class="op">[</span>fa<span class="op">[</span>x<span class="op">]])</span>trie<span class="op">::</span>erase<span class="op">(</span>trie<span class="op">::</span>rt<span class="op">[</span>fa<span class="op">[</span>fa<span class="op">[</span>x<span class="op">]]],</span> get<span class="op">(</span>fa<span class="op">[</span>x<span class="op">]),</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>                V<span class="op">[</span>fa<span class="op">[</span>x<span class="op">]]</span> <span class="op">++;</span></span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span><span class="op">(</span>fa<span class="op">[</span>fa<span class="op">[</span>x<span class="op">]])</span>trie<span class="op">::</span>insert<span class="op">(</span>trie<span class="op">::</span>rt<span class="op">[</span>fa<span class="op">[</span>fa<span class="op">[</span>x<span class="op">]]],</span> get<span class="op">(</span>fa<span class="op">[</span>x<span class="op">]),</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a>            trie<span class="op">::</span>addall<span class="op">(</span>trie<span class="op">::</span>rt<span class="op">[</span>x<span class="op">]);</span></span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span><span class="op">(</span>opt <span class="op">==</span> <span class="dv">2</span><span class="op">){</span></span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> v <span class="op">=</span> read<span class="op">();</span></span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span><span class="op">(</span>x <span class="op">!=</span> rt<span class="op">)</span> trie<span class="op">::</span>erase<span class="op">(</span>trie<span class="op">::</span>rt<span class="op">[</span>fa<span class="op">[</span>x<span class="op">]],</span> get<span class="op">(</span>x<span class="op">),</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a>            V<span class="op">[</span>x<span class="op">]</span> <span class="op">-=</span> v<span class="op">;</span></span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span><span class="op">(</span>x <span class="op">!=</span> rt<span class="op">)</span> trie<span class="op">::</span>insert<span class="op">(</span>trie<span class="op">::</span>rt<span class="op">[</span>fa<span class="op">[</span>x<span class="op">]],</span> get<span class="op">(</span>x<span class="op">),</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> res <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a>            res <span class="op">=</span> trie<span class="op">::</span>xorv<span class="op">[</span>trie<span class="op">::</span>rt<span class="op">[</span>x<span class="op">]];</span></span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a>            res <span class="op">^=</span> get<span class="op">(</span>fa<span class="op">[</span>x<span class="op">]);</span></span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> res<span class="op">);</span></span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a>    <span class="bu">std::</span>cerr <span class="op">&lt;&lt;</span> <span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">Time:  &quot;</span> <span class="op">&lt;&lt;</span> clock<span class="op">()</span> <span class="op">-</span> c1 <span class="op">&lt;&lt;</span> <span class="st">&quot;  ms&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
                                    </div>

                                    <!-- Article Footer -->
                                    <div class="article-footer">
                                                                            
                                        <section class="post-history">
                                            <div class="history-header">
                                                <h2>📚 Version History</h2>
                                                <span class="history-desc">Source Code Change History</span>
                                            </div>
                                            <div class="version-list">
                                                
                                                    <div class="version-item">
                                                        <div class="version-header">
                                                            <span class="version-badge">v1</span>
                                                            <time class="version-time" datetime="2020-07-10 17:26:42">
                                                                📅 2020-07-10 17:26:42
                                                            </time>
                                                        </div>
                                                        <div class="version-hash-container">
                                                            <span class="hash-label">🔗 Source Hash:</span>
                                                            <code class="version-hash" title="Source Code Hash (e343f27580d27e6d5244d2e56e92d709238415764dbe586af9c9b34fba6758b6)">e343f27580d27e6d5244d2e56e92d709238415764dbe586af9c9b34fba6758b6</code>
                                                        </div>
                                                    </div>
                                                
                                            </div>
                                        </section>
                    

                    
                                            <details class="build-logs">
                                                <summary>Build Logs</summary>
                                                <pre class="logs-content">Build Log - Filtered
================================================

📋 Information:
• Path information has been filtered for privacy protection
• File names are preserved for debugging purposes  
• All build status and error messages are kept intact

🔍 Filter Rules:
• /absolute/path/file.ext → .../file.ext
• /home/username → .../[user]
• /tmp/files → .../[temp]
• /usr/share/packages → .../[system]

================================================

html log:
CMD: ['pandoc', '-s', 'cache/oi-blog_「杂题记录」「YuGu P6623」「省选联考 2020 A 卷」 树.md', '--filter', 'pandoc-crossref', '--filter', 'pandoc-katex', '--template=cache/pandoc_html_template.html', '-o', 'cache/oi-blog_「杂题记录」「YuGu P6623」「省选联考 2020 A 卷」 树.md.html', '--metadata', '--verbose', '--highlight-style=tango']
STDOUT: 
STDERR: WARNING: pandoc-crossref was compiled with pandoc 3.6.2 but is being run through 3.6.4. This is not supported. Strange things may (and likely will) happen silently.

====================================================================================================
pdf log:
CMD: ['pandoc', '-s', 'cache.../3d29fe1096.pdf.md', '-o', 'cache/3d29fe1096.pdf', '-H', 'static/pandoc.header.tex', '--pdf-engine=xelatex', '--verbose']
STDOUT: 
STDERR: [INFO] Loaded static.../pandoc.header.tex from static.../pandoc.header.tex
[INFO] Not rendering RawBlock (Format "html") "<!-- more -->"
[INFO] [makePDF] Temp dir:
  .../[temp]
[INFO] [makePDF] Command line:
  xelatex "-halt-on-error" "-interaction" "nonstopmode" "-output-directory" ".../[temp] ".../[temp]
[INFO] [makePDF] Relevant environment variables:
  ("TEXINPUTS",".../[temp]
  ("TEXMFOUTPUT",".../[temp]
  ("SHELL","/bin/bash")
  ("PWD",".../[user]/projects/blog")
  ("HOME",".../[user]
  ("LANG","zh_CN.UTF-8")
  ("PATH",".../[user]/.local/bin:.../[user]/.cargo/bin:.../[user]/miniconda3/envs/myblog/bin:.../[user]/miniconda3/condabin:.../[temp]
[INFO] [makePDF] Source:
  % Options for packages loaded elsewhere
  \PassOptionsToPackage{unicode}{hyperref}
  \PassOptionsToPackage{hyphens}{url}
  \PassOptionsToPackage{space}{xeCJK}
  \documentclass[
  ]{article}
  \usepackage{xcolor}
  \usepackage[a4paper,margin=2cm]{geometry}
  \usepackage{amsmath,amssymb}
  \setcounter{secnumdepth}{-\maxdimen} % remove section numbering
  \usepackage{iftex}
  \ifPDFTeX
    \usepackage[T1]{fontenc}
    \usepackage[utf8]{inputenc}
    \usepackage{textcomp} % provide euro and other symbols
  \else % if luatex or xetex
    \usepackage{unicode-math} % this also loads fontspec
    \defaultfontfeatures{Scale=MatchLowercase}
    \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
  \fi
  \usepackage{lmodern}
  \ifPDFTeX\else
    % xetex/luatex font selection
    \setmainfont[]{Latin Modern Roman}
    \ifXeTeX
      \usepackage{xeCJK}
      \setCJKmainfont[]{AR PL UKai CN}
    \fi
    \ifLuaTeX
      \usepackage[]{luatexja-fontspec}
      \setmainjfont[]{AR PL UKai CN}
    \fi
  \fi
  % Use upquote if available, for straight quotes in verbatim environments
  \IfFileExists{upquote.sty}{\usepackage{upquote}}{}
  \IfFileExists{microtype.sty}{% use microtype if available
    \usepackage[]{microtype}
    \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
  }{}
  \usepackage{setspace}
  \makeatletter
  \@ifundefined{KOMAClassName}{% if non-KOMA class
    \IfFileExists{parskip.sty}{%
      \usepackage{parskip}
    }{% else
      \setlength{\parindent}{0pt}
      \setlength{\parskip}{6pt plus 2pt minus 1pt}}
  }{% if KOMA class
    \KOMAoptions{parskip=half}}
  \makeatother
  \usepackage{color}
  \usepackage{fancyvrb}
  \newcommand{\VerbBar}{|}
  \newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
  \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
  % Add ',fontsize=\small' for more characters per line
  \newenvironment{Shaded}{}{}
  \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{#1}}}
  \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
  \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{#1}}
  \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{#1}}
  \newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.50,0.00}{#1}}
  \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
  \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{#1}}}
  \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
  \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{#1}}
  \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{#1}}}
  \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{#1}}
  \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{#1}}
  \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{#1}}}
  \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{#1}}}
  \newcommand{\ExtensionTok}[1]{#1}
  \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{#1}}
  \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{#1}}
  \newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.50,0.00}{\textbf{#1}}}
  \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
  \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{#1}}}
  \newcommand{\NormalTok}[1]{#1}
  \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{#1}}
  \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{#1}}
  \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{#1}}
  \newcommand{\RegionMarkerTok}[1]{#1}
  \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
  \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{#1}}
  \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
  \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{#1}}
  \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
  \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
  \setlength{\emergencystretch}{3em} % prevent overfull lines
  \providecommand{\tightlist}{%
    \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
  % \usepackage{xeCJK}
  % \setCJKmainfont{AR PL UKai CN}
  % \usepackage{unicode-math}
  
  \setmathfont{Latin Modern Math}
  \usepackage{bookmark}
  \IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
  \urlstyle{same}
  \hypersetup{
    pdftitle={「杂题记录」「YuGu P6623」「省选联考 2020 A 卷」 树},
    pdfauthor={Jiayi Su (ShuYuMo)},
    hidelinks,
    pdfcreator={LaTeX via pandoc}}
  
  \title{「杂题记录」「YuGu P6623」「省选联考 2020 A 卷」 树}
  \author{Jiayi Su (ShuYuMo)}
  \date{2020-07-10 17:26:42}
  
  \begin{document}
  \maketitle
  
  \setstretch{1.3}
  给定一棵 \(n\) 个结点的有根树 \(T\) ，结点从 \(1\) 开始编号，根结点为
  \(1\) 号结点，每个结点有一个正整数权值 \(v_i\) 。
  
  设 \(x\) 号结点的子树内（包含 \(x\) 自身）的所有结点编号为
  \(c_1,c_2,\dots,c_k\) ，定义 \(x\) 的价值为：
  
  \(val(x)=(v_{c_1}+d(c_1,x)) \oplus (v_{c_2}+d(c_2,x)) \oplus \cdots \oplus (v_{c_k}+d(c_k, x))\)
  其中 \(d(x,y)\) 。
  
  表示树上 \(x\) 号结点与 \(y\) 号结点间唯一简单路径所包含的边数，
  \(d(x,x) = 0\) 。 \(\oplus\) 表示异或运算。
  
  请你求出 \(\sum\limits_{i=1}^n val(i)\) 的结果。
  
  考虑每个结点对其所有祖先的贡献。 每个结点建立
  trie，初始先只存这个结点的权值，然后从底向上合并每个儿子结点上的
  trie，然后再全局加一，完成后统计答案。
  
  \subsection{全局加一（维护异或和）}\label{ux5168ux5c40ux52a0ux4e00ux7ef4ux62a4ux5f02ux6216ux548c}
  
  这个不太好表述啊\textasciitilde{}\\
  \texttt{01-trie数} 是指字符集为 \(\{0,1\}\) 的 Trie 树。\\
  \texttt{01-trie树}可以用来维护一堆数字的异或和，支持修改（删除+重新插入），和全部维护值加一。
  
  如果要维护异或和，需要按值从低位到高位建立\texttt{trie}。
  
  \textbf{一个约定}：文中说当前节点\textbf{往上}指当前节点到根这条路径，当前节点\textbf{往下}指当前结点的子树。
  
  \subsubsection{插入\&删除}\label{ux63d2ux5165ux5220ux9664}
  
  如果要维护异或和，我们只需要知道某一位上\texttt{0}和\texttt{1}个数的奇偶性即可，也就是对于数字\texttt{1}来说，当且仅当这一位上数字\texttt{1}的个数为奇数时，这一位上的数字才是\texttt{1}。
  
  对于每一个节点，我们需要记录以下三个量： -
  \texttt{ch{[}o{]}{[}0/1{]}}指节点\texttt{o}的两个儿子，\texttt{ch{[}o{]}{[}0{]}}指下一位是\texttt{0}，同理\texttt{ch{[}o{]}{[}1{]}}指下一位是\texttt{0}。
  -
  \texttt{w{[}o{]}}指节点\texttt{o}到其父亲节点这条边上数值的数量（权值）。每插入一个数字\texttt{x}，\texttt{x}二进制拆分后在
  \texttt{trie}树上 路径的权值都会\texttt{+1}。 -
  \texttt{xorv{[}o{]}}指以\texttt{o}为根的子树维护的异或和。
  
  具体维护结点的代码如下所示。
  
  \begin{Shaded}
  \begin{Highlighting}[]
  \DataTypeTok{void}\NormalTok{ maintain}\OperatorTok{(}\DataTypeTok{int}\NormalTok{ o}\OperatorTok{)\{}
  \NormalTok{        w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{=}\NormalTok{ xorv}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{=} \DecValTok{0}\OperatorTok{;}
          \ControlFlowTok{if}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{])\{}\NormalTok{ w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{+=}\NormalTok{ w}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{]];}\NormalTok{ xorv}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{\^{}=}\NormalTok{  xorv}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{]]} \OperatorTok{\textless{}\textless{}} \DecValTok{1}\OperatorTok{;} \OperatorTok{\}}
          \ControlFlowTok{if}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{])\{}\NormalTok{ w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{+=}\NormalTok{ w}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{]];}\NormalTok{ xorv}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{\^{}=} \OperatorTok{(}\NormalTok{xorv}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{]]} \OperatorTok{\textless{}\textless{}} \DecValTok{1}\OperatorTok{)} \OperatorTok{|} \OperatorTok{(}\NormalTok{w}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{]]} \OperatorTok{\&} \DecValTok{1}\OperatorTok{);} \OperatorTok{\}}
          \CommentTok{//w[o] = w[o] \& 1;}
          \CommentTok{//只需知道奇偶性即可，不需要具体的值。当然这句话删掉也可以，因为上文就只利用了他的奇偶性。}
      \OperatorTok{\}}
  \end{Highlighting}
  \end{Shaded}
  
  插入和删除的代码非常相似。
  
  需要注意的地方就是：
  
  \begin{itemize}
  \item
    这里的\texttt{MAXH}指\texttt{trie}的深度，也就是强制让每一个叶子节点到根的距离为\texttt{MAXH}。对于一些比较小的值，可能有时候不需要建立这么深（例如：如果插入数字\texttt{4}，分解成二进制后为\texttt{100}，
    从根开始插入\texttt{001}这三位即可），但是我们强制插入\texttt{MAXH}位。这样做的目的是为了便于全局\texttt{+1}时处理进位。例如：如果原数字是\texttt{3}（\texttt{11}），++之后变成\texttt{4}（\texttt{100}），如果当初插入\texttt{3}时只插入了\texttt{2}位，那这里的进位就没了。
  \item
    插入和删除，只需要修改叶子节点的\texttt{w{[}{]}}即可，在回溯的过程中一路维护即可。
  \end{itemize}
  
  \begin{Shaded}
  \begin{Highlighting}[]
  \KeywordTok{namespace}\NormalTok{ trie}\OperatorTok{\{}
      \AttributeTok{const} \DataTypeTok{int}\NormalTok{ MAXH }\OperatorTok{=} \DecValTok{21}\OperatorTok{;} 
      \DataTypeTok{int}\NormalTok{ ch}\OperatorTok{[}\NormalTok{\_ }\OperatorTok{*} \OperatorTok{(}\NormalTok{MAXH }\OperatorTok{+} \DecValTok{1}\OperatorTok{)][}\DecValTok{2}\OperatorTok{],}\NormalTok{ w}\OperatorTok{[}\NormalTok{\_ }\OperatorTok{*} \OperatorTok{(}\NormalTok{MAXH }\OperatorTok{+} \DecValTok{1}\OperatorTok{)],}\NormalTok{ xorv}\OperatorTok{[}\NormalTok{\_ }\OperatorTok{*} \OperatorTok{(}\NormalTok{MAXH }\OperatorTok{+} \DecValTok{1}\OperatorTok{)];}
      \DataTypeTok{int}\NormalTok{ tot }\OperatorTok{=} \DecValTok{0}\OperatorTok{;}
      \DataTypeTok{int}\NormalTok{ mknode}\OperatorTok{()\{} \OperatorTok{++}\NormalTok{tot}\OperatorTok{;}\NormalTok{ ch}\OperatorTok{[}\NormalTok{tot}\OperatorTok{][}\DecValTok{1}\OperatorTok{]} \OperatorTok{=}\NormalTok{ ch}\OperatorTok{[}\NormalTok{tot}\OperatorTok{][}\DecValTok{0}\OperatorTok{]} \OperatorTok{=}\NormalTok{ w}\OperatorTok{[}\NormalTok{tot}\OperatorTok{]} \OperatorTok{=}\NormalTok{ xorv}\OperatorTok{[}\NormalTok{tot}\OperatorTok{]} \OperatorTok{=} \DecValTok{0}\OperatorTok{;} \ControlFlowTok{return}\NormalTok{ tot}\OperatorTok{;\}}
      \DataTypeTok{void}\NormalTok{ maintain}\OperatorTok{(}\DataTypeTok{int}\NormalTok{ o}\OperatorTok{)\{}
  \NormalTok{        w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{=}\NormalTok{ xorv}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{=} \DecValTok{0}\OperatorTok{;}
          \ControlFlowTok{if}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{])\{}\NormalTok{ w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{+=}\NormalTok{ w}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{]];}\NormalTok{ xorv}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{\^{}=}\NormalTok{  xorv}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{]]} \OperatorTok{\textless{}\textless{}} \DecValTok{1}\OperatorTok{;} \OperatorTok{\}}
          \ControlFlowTok{if}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{])\{}\NormalTok{ w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{+=}\NormalTok{ w}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{]];}\NormalTok{ xorv}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{\^{}=} \OperatorTok{(}\NormalTok{xorv}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{]]} \OperatorTok{\textless{}\textless{}} \DecValTok{1}\OperatorTok{)} \OperatorTok{|} \OperatorTok{(}\NormalTok{w}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{]]} \OperatorTok{\&} \DecValTok{1}\OperatorTok{);} \OperatorTok{\}}
  \NormalTok{        w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{=}\NormalTok{ w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{\&} \DecValTok{1}\OperatorTok{;}
      \OperatorTok{\}}
      \DataTypeTok{void}\NormalTok{ insert}\OperatorTok{(}\DataTypeTok{int} \OperatorTok{\&}\NormalTok{o}\OperatorTok{,} \DataTypeTok{int}\NormalTok{ x}\OperatorTok{,} \DataTypeTok{int}\NormalTok{ dp}\OperatorTok{)\{}
          \ControlFlowTok{if}\OperatorTok{(!}\NormalTok{o}\OperatorTok{)}\NormalTok{ o }\OperatorTok{=}\NormalTok{ mknode}\OperatorTok{();}
          \ControlFlowTok{if}\OperatorTok{(}\NormalTok{dp }\OperatorTok{\textgreater{}}\NormalTok{ MAXH}\OperatorTok{)} \ControlFlowTok{return} \OperatorTok{(}\DataTypeTok{void}\OperatorTok{)(}\NormalTok{w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{++);}
  \NormalTok{        insert}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\NormalTok{ x}\OperatorTok{\&}\DecValTok{1} \OperatorTok{],}\NormalTok{ x }\OperatorTok{\textgreater{}\textgreater{}} \DecValTok{1}\OperatorTok{,}\NormalTok{ dp }\OperatorTok{+} \DecValTok{1}\OperatorTok{);}
  \NormalTok{        maintain}\OperatorTok{(}\NormalTok{o}\OperatorTok{);}
      \OperatorTok{\}}
  \OperatorTok{\}}
  \end{Highlighting}
  \end{Shaded}
  
  \subsubsection{全局加一}\label{ux5168ux5c40ux52a0ux4e00}
  
  \begin{Shaded}
  \begin{Highlighting}[]
  \DataTypeTok{void}\NormalTok{ addall}\OperatorTok{(}\DataTypeTok{int}\NormalTok{ o}\OperatorTok{)\{}
  \NormalTok{    swap}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{],}\NormalTok{ ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{]);}
      \ControlFlowTok{if}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{])}\NormalTok{ addall}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{]);}
  \NormalTok{    maintain}\OperatorTok{(}\NormalTok{o}\OperatorTok{);}
  \OperatorTok{\}}
  \end{Highlighting}
  \end{Shaded}
  
  不知道你能不能直接看懂呢？
  
  我们思考一下二进制意义下\texttt{+1}是如何操作的。
  
  我们只需要从低位到高位开始找第一个出现的\texttt{0}，把它变成\texttt{1}，然后这个位置后面的\texttt{1}都变成\texttt{0}即可。
  
  下面给出几个例子感受一下。（括号内的数字表示其对应的十进制数字）
  
  \begin{Shaded}
  \begin{Highlighting}[]
  \DecValTok{1000}  \OperatorTok{(}\DecValTok{10}\OperatorTok{)}   \OperatorTok{+} \DecValTok{1} \OperatorTok{=} \DecValTok{1001}   \OperatorTok{(}\DecValTok{11}\OperatorTok{)}
  \DecValTok{10011} \OperatorTok{(}\DecValTok{19}\OperatorTok{)}   \OperatorTok{+} \DecValTok{1} \OperatorTok{=} \DecValTok{10100}  \OperatorTok{(}\DecValTok{20}\OperatorTok{)}
  \DecValTok{11111} \OperatorTok{(}\DecValTok{31}\OperatorTok{)}   \OperatorTok{+} \DecValTok{1} \OperatorTok{=} \DecValTok{100000} \OperatorTok{(}\DecValTok{32}\OperatorTok{)}
  \DecValTok{10101} \OperatorTok{(}\DecValTok{21}\OperatorTok{)}   \OperatorTok{+} \DecValTok{1} \OperatorTok{=} \DecValTok{10110}  \OperatorTok{(}\DecValTok{22}\OperatorTok{)}
  \DecValTok{100000000111111}\OperatorTok{(}\DecValTok{16447}\OperatorTok{)} \OperatorTok{+} \DecValTok{1} \OperatorTok{=} \DecValTok{100000001000000}\OperatorTok{(}\DecValTok{16448}\OperatorTok{)}
  \end{Highlighting}
  \end{Shaded}
  
  回顾一下\texttt{w{[}o{]}}的定义：\texttt{w{[}o{]}}指节点\texttt{o}到其父亲节点这条边上数值的数量（权值）。
  
  有没有感觉这个定义有点怪呢？如果在父亲结点存储到两个儿子的这条边的边权也许会更接近于习惯。但是在这里，在交换左右儿子的时候，在儿子结点存储到父亲这条边的距离，显然更加方便。
  
  \section{Code}\label{code}
  
  \begin{Shaded}
  \begin{Highlighting}[]
  
  
  \KeywordTok{namespace}\NormalTok{ trie}\OperatorTok{\{}
      \AttributeTok{const} \DataTypeTok{int}\NormalTok{ \_n }\OperatorTok{=}\NormalTok{ \_ }\OperatorTok{*} \DecValTok{25}\OperatorTok{;}
      \DataTypeTok{int}\NormalTok{ rt}\OperatorTok{[}\NormalTok{\_}\OperatorTok{];}
      \DataTypeTok{int}\NormalTok{ ch}\OperatorTok{[}\NormalTok{\_n}\OperatorTok{][}\DecValTok{2}\OperatorTok{];}
      \DataTypeTok{int}\NormalTok{ w}\OperatorTok{[}\NormalTok{\_n}\OperatorTok{];} 
      \DataTypeTok{int}\NormalTok{ xorv}\OperatorTok{[}\NormalTok{\_n}\OperatorTok{];}
  \CommentTok{// w[i] is in order to save the weight of edge which is connect \textasciigrave{}i\textasciigrave{} and its \textasciigrave{}parent\textasciigrave{}.}
      \DataTypeTok{int}\NormalTok{ tot }\OperatorTok{=} \DecValTok{0}\OperatorTok{;}
      \DataTypeTok{void}\NormalTok{ maintain}\OperatorTok{(}\DataTypeTok{int}\NormalTok{ o}\OperatorTok{)\{}
  \NormalTok{        w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{=}\NormalTok{ xorv}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{=} \DecValTok{0}\OperatorTok{;}
          \ControlFlowTok{if}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{])\{}\NormalTok{ w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{+=}\NormalTok{ w}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{]];}\NormalTok{ xorv}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{\^{}=}\NormalTok{  xorv}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{]]} \OperatorTok{\textless{}\textless{}} \DecValTok{1}\OperatorTok{;} \OperatorTok{\}}
          \ControlFlowTok{if}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{])\{}\NormalTok{ w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{+=}\NormalTok{ w}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{]];}\NormalTok{ xorv}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{\^{}=} \OperatorTok{(}\NormalTok{xorv}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{]]} \OperatorTok{\textless{}\textless{}} \DecValTok{1}\OperatorTok{)} \OperatorTok{|} \OperatorTok{(}\NormalTok{w}\OperatorTok{[}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{]]} \OperatorTok{\&} \DecValTok{1}\OperatorTok{);} \OperatorTok{\}}
      \OperatorTok{\}}
      \KeywordTok{inline} \DataTypeTok{int}\NormalTok{ mknode}\OperatorTok{()\{} \OperatorTok{++}\NormalTok{tot}\OperatorTok{;}\NormalTok{ ch}\OperatorTok{[}\NormalTok{tot}\OperatorTok{][}\DecValTok{0}\OperatorTok{]} \OperatorTok{=}\NormalTok{ ch}\OperatorTok{[}\NormalTok{tot}\OperatorTok{][}\DecValTok{1}\OperatorTok{]} \OperatorTok{=} \DecValTok{0}\OperatorTok{;}\NormalTok{ w}\OperatorTok{[}\NormalTok{tot}\OperatorTok{]} \OperatorTok{=} \DecValTok{0}\OperatorTok{;} \ControlFlowTok{return}\NormalTok{ tot}\OperatorTok{;} \OperatorTok{\}}
      \DataTypeTok{void}\NormalTok{ insert}\OperatorTok{(}\DataTypeTok{int} \OperatorTok{\&}\NormalTok{o}\OperatorTok{,} \DataTypeTok{int}\NormalTok{ x}\OperatorTok{,} \DataTypeTok{int}\NormalTok{ dp}\OperatorTok{)\{}
          \ControlFlowTok{if}\OperatorTok{(!}\NormalTok{o}\OperatorTok{)}\NormalTok{ o }\OperatorTok{=}\NormalTok{ mknode}\OperatorTok{();}
          \ControlFlowTok{if}\OperatorTok{(}\NormalTok{dp }\OperatorTok{\textgreater{}} \DecValTok{20}\OperatorTok{)} \ControlFlowTok{return} \OperatorTok{(}\DataTypeTok{void}\OperatorTok{)(}\NormalTok{w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{++);}
  \CommentTok{//        if(dp == 0)cerr \textless{}\textless{} "New start" \textless{}\textless{} endl;}
  \CommentTok{//        cerr \textless{}\textless{} "inserted " \textless{}\textless{} (x\&1) \textless{}\textless{} endl;}
  \NormalTok{        insert}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\NormalTok{ x}\OperatorTok{\&}\DecValTok{1} \OperatorTok{],}\NormalTok{ x }\OperatorTok{\textgreater{}\textgreater{}} \DecValTok{1}\OperatorTok{,}\NormalTok{ dp }\OperatorTok{+} \DecValTok{1}\OperatorTok{);}
  \NormalTok{        maintain}\OperatorTok{(}\NormalTok{o}\OperatorTok{);} 
  \CommentTok{//      cerr \textless{}\textless{} w[o] \textless{}\textless{} endl;}
      \OperatorTok{\}}
      \DataTypeTok{void}\NormalTok{ erase}\OperatorTok{(}\DataTypeTok{int}\NormalTok{ o}\OperatorTok{,} \DataTypeTok{int}\NormalTok{ x}\OperatorTok{,} \DataTypeTok{int}\NormalTok{ dp}\OperatorTok{)\{}
          \ControlFlowTok{if}\OperatorTok{(}\NormalTok{dp }\OperatorTok{\textgreater{}} \DecValTok{20}\OperatorTok{)} \ControlFlowTok{return} \OperatorTok{(}\DataTypeTok{void} \OperatorTok{)(}\NormalTok{w}\OperatorTok{[}\NormalTok{o}\OperatorTok{]{-}{-});}
  \NormalTok{        erase}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\NormalTok{ x}\OperatorTok{\&}\DecValTok{1} \OperatorTok{],}\NormalTok{ x }\OperatorTok{\textgreater{}\textgreater{}} \DecValTok{1}\OperatorTok{,}\NormalTok{ dp }\OperatorTok{+} \DecValTok{1}\OperatorTok{);}
  \NormalTok{        maintain}\OperatorTok{(}\NormalTok{o}\OperatorTok{);}
      \OperatorTok{\}}
      \DataTypeTok{void}\NormalTok{ addall}\OperatorTok{(}\DataTypeTok{int}\NormalTok{ o}\OperatorTok{)\{}
  \NormalTok{        swap}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{1}\OperatorTok{],}\NormalTok{ ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{]);}
          \ControlFlowTok{if}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{])}\NormalTok{ addall}\OperatorTok{(}\NormalTok{ch}\OperatorTok{[}\NormalTok{o}\OperatorTok{][}\DecValTok{0}\OperatorTok{]);}
  \NormalTok{        maintain}\OperatorTok{(}\NormalTok{o}\OperatorTok{);}
      \OperatorTok{\}}
  \OperatorTok{\}}
  
  \DataTypeTok{int}\NormalTok{ head}\OperatorTok{[}\NormalTok{\_}\OperatorTok{];}
  \KeywordTok{struct}\NormalTok{ edges}\OperatorTok{\{}
      \DataTypeTok{int}\NormalTok{ node}\OperatorTok{;}
      \DataTypeTok{int}\NormalTok{ nxt}\OperatorTok{;}
  \OperatorTok{\}}\NormalTok{edge}\OperatorTok{[}\NormalTok{\_ }\OperatorTok{\textless{}\textless{}} \DecValTok{1}\OperatorTok{];}
  \DataTypeTok{int}\NormalTok{ tot }\OperatorTok{=} \DecValTok{0}\OperatorTok{;}
  \DataTypeTok{void}\NormalTok{ add}\OperatorTok{(}\DataTypeTok{int}\NormalTok{ u}\OperatorTok{,} \DataTypeTok{int}\NormalTok{ v}\OperatorTok{)\{}
  \NormalTok{    edge}\OperatorTok{[++}\NormalTok{tot}\OperatorTok{].}\NormalTok{nxt }\OperatorTok{=}\NormalTok{ head}\OperatorTok{[}\NormalTok{u}\OperatorTok{];}
  \NormalTok{    head}\OperatorTok{[}\NormalTok{u}\OperatorTok{]} \OperatorTok{=}\NormalTok{ tot}\OperatorTok{;}
  \NormalTok{    edge}\OperatorTok{[}\NormalTok{tot}\OperatorTok{].}\NormalTok{node }\OperatorTok{=}\NormalTok{ v}\OperatorTok{;}
  \OperatorTok{\}}
  
  \DataTypeTok{int}\NormalTok{ n}\OperatorTok{,}\NormalTok{ m}\OperatorTok{;}
  \DataTypeTok{int}\NormalTok{ rt}\OperatorTok{;}
  \DataTypeTok{int}\NormalTok{ lztar}\OperatorTok{[}\NormalTok{\_}\OperatorTok{];}
  \DataTypeTok{int}\NormalTok{ fa}\OperatorTok{[}\NormalTok{\_}\OperatorTok{];}
  \DataTypeTok{void}\NormalTok{ dfs0}\OperatorTok{(}\DataTypeTok{int}\NormalTok{ o}\OperatorTok{,} \DataTypeTok{int}\NormalTok{ f}\OperatorTok{)\{}
  \NormalTok{    fa}\OperatorTok{[}\NormalTok{o}\OperatorTok{]} \OperatorTok{=}\NormalTok{ f}\OperatorTok{;}
      \ControlFlowTok{for}\OperatorTok{(}\DataTypeTok{int}\NormalTok{ i }\OperatorTok{=}\NormalTok{ head}\OperatorTok{[}\NormalTok{o}\OperatorTok{];}\NormalTok{i}\OperatorTok{;}\NormalTok{i }\OperatorTok{=}\NormalTok{ edge}\OperatorTok{[}\NormalTok{i}\OperatorTok{].}\NormalTok{nxt}\OperatorTok{)\{}
          \DataTypeTok{int}\NormalTok{ node }\OperatorTok{=}\NormalTok{ edge}\OperatorTok{[}\NormalTok{i}\OperatorTok{].}\NormalTok{node}\OperatorTok{;}
          \ControlFlowTok{if}\OperatorTok{(}\NormalTok{node }\OperatorTok{==}\NormalTok{ f}\OperatorTok{)} \ControlFlowTok{continue}\OperatorTok{;}
  \NormalTok{        dfs0}\OperatorTok{(}\NormalTok{node}\OperatorTok{,}\NormalTok{ o}\OperatorTok{);}
      \OperatorTok{\}}
  \OperatorTok{\}}
  \DataTypeTok{int}\NormalTok{ V}\OperatorTok{[}\NormalTok{\_}\OperatorTok{];}
  \KeywordTok{inline} \DataTypeTok{int}\NormalTok{ get}\OperatorTok{(}\DataTypeTok{int}\NormalTok{ x}\OperatorTok{)\{} \ControlFlowTok{return} \OperatorTok{(}\NormalTok{fa}\OperatorTok{[}\NormalTok{x}\OperatorTok{]} \OperatorTok{==} \OperatorTok{{-}}\DecValTok{1} \OperatorTok{?} \DecValTok{0} \OperatorTok{:}\NormalTok{ lztar}\OperatorTok{[}\NormalTok{fa}\OperatorTok{[}\NormalTok{x}\OperatorTok{]])} \OperatorTok{+}\NormalTok{ V}\OperatorTok{[}\NormalTok{x}\OperatorTok{];} \OperatorTok{\}}
  \DataTypeTok{int}\NormalTok{ main}\OperatorTok{()}
  \OperatorTok{\{}
  \PreprocessorTok{\#ifdef LOCAL\_JUDGE}
  \CommentTok{//    freopen("in.in", "r", stdin);}
  \CommentTok{//    freopen("out.txt", "w", stdout);}
  \PreprocessorTok{\#endif}
  \CommentTok{//  freopen("in.in", "r", stdin);}
      \DataTypeTok{clock\_t}\NormalTok{ c1 }\OperatorTok{=}\NormalTok{ clock}\OperatorTok{();}
      
  \NormalTok{    n }\OperatorTok{=}\NormalTok{ read}\OperatorTok{(),}\NormalTok{ m }\OperatorTok{=}\NormalTok{ read}\OperatorTok{();}
      \ControlFlowTok{for}\OperatorTok{(}\DataTypeTok{int}\NormalTok{ i }\OperatorTok{=} \DecValTok{1}\OperatorTok{;}\NormalTok{i }\OperatorTok{\textless{}}\NormalTok{ n}\OperatorTok{;}\NormalTok{i}\OperatorTok{++)\{}
          \DataTypeTok{int}\NormalTok{ u }\OperatorTok{=}\NormalTok{ read}\OperatorTok{(),}\NormalTok{ v }\OperatorTok{=}\NormalTok{ read}\OperatorTok{();} \CommentTok{//read();}
  \NormalTok{        add}\OperatorTok{(}\NormalTok{u}\OperatorTok{,}\NormalTok{ v}\OperatorTok{);}\NormalTok{ add}\OperatorTok{(}\NormalTok{rt }\OperatorTok{=}\NormalTok{ v}\OperatorTok{,}\NormalTok{ u}\OperatorTok{);}
      \OperatorTok{\}}
  \CommentTok{//    show(rt);}
  \NormalTok{    dfs0}\OperatorTok{(}\NormalTok{rt}\OperatorTok{,} \OperatorTok{{-}}\DecValTok{1}\OperatorTok{);}
      \ControlFlowTok{for}\OperatorTok{(}\DataTypeTok{int}\NormalTok{ i }\OperatorTok{=} \DecValTok{1}\OperatorTok{;}\NormalTok{i }\OperatorTok{\textless{}=}\NormalTok{ n}\OperatorTok{;}\NormalTok{i}\OperatorTok{++)} \OperatorTok{\{}\NormalTok{ V}\OperatorTok{[}\NormalTok{i}\OperatorTok{]} \OperatorTok{=}\NormalTok{ read}\OperatorTok{();} \ControlFlowTok{if}\OperatorTok{(}\NormalTok{fa}\OperatorTok{[}\NormalTok{i}\OperatorTok{]} \OperatorTok{!=} \OperatorTok{{-}}\DecValTok{1}\OperatorTok{)}\NormalTok{trie}\OperatorTok{::}\NormalTok{insert}\OperatorTok{(}\NormalTok{trie}\OperatorTok{::}\NormalTok{rt}\OperatorTok{[}\NormalTok{fa}\OperatorTok{[}\NormalTok{i}\OperatorTok{]],}\NormalTok{ V}\OperatorTok{[}\NormalTok{i}\OperatorTok{],} \DecValTok{0}\OperatorTok{);}  \OperatorTok{\}}
  \CommentTok{//    puts("OK");}
      \ControlFlowTok{while}\OperatorTok{(}\NormalTok{m}\OperatorTok{{-}{-})\{}
          \DataTypeTok{int}\NormalTok{ opt }\OperatorTok{=}\NormalTok{ read}\OperatorTok{(),}\NormalTok{ x }\OperatorTok{=}\NormalTok{ read}\OperatorTok{();} \CommentTok{//cerr \textless{}\textless{} "opt = " \textless{}\textless{} opt \textless{}\textless{} endl;}
  \CommentTok{//        if(get(x) \textless{} 0) puts("data error");}
          \ControlFlowTok{if}\OperatorTok{(}\NormalTok{opt }\OperatorTok{==} \DecValTok{1}\OperatorTok{)\{}
  \NormalTok{            lztar}\OperatorTok{[}\NormalTok{x}\OperatorTok{]} \OperatorTok{++;} \CommentTok{//cerr \textless{}\textless{} "add lztar[ " \textless{}\textless{} x \textless{}\textless{} " ]" \textless{}\textless{} endl;}
              \ControlFlowTok{if}\OperatorTok{(}\NormalTok{x }\OperatorTok{!=}\NormalTok{ rt}\OperatorTok{)} \OperatorTok{\{}
                  \ControlFlowTok{if}\OperatorTok{(}\NormalTok{fa}\OperatorTok{[}\NormalTok{fa}\OperatorTok{[}\NormalTok{x}\OperatorTok{]])}\NormalTok{trie}\OperatorTok{::}\NormalTok{erase}\OperatorTok{(}\NormalTok{trie}\OperatorTok{::}\NormalTok{rt}\OperatorTok{[}\NormalTok{fa}\OperatorTok{[}\NormalTok{fa}\OperatorTok{[}\NormalTok{x}\OperatorTok{]]],}\NormalTok{ get}\OperatorTok{(}\NormalTok{fa}\OperatorTok{[}\NormalTok{x}\OperatorTok{]),} \DecValTok{0}\OperatorTok{);}
  \NormalTok{                V}\OperatorTok{[}\NormalTok{fa}\OperatorTok{[}\NormalTok{x}\OperatorTok{]]} \OperatorTok{++;}
                  \ControlFlowTok{if}\OperatorTok{(}\NormalTok{fa}\OperatorTok{[}\NormalTok{fa}\OperatorTok{[}\NormalTok{x}\OperatorTok{]])}\NormalTok{trie}\OperatorTok{::}\NormalTok{insert}\OperatorTok{(}\NormalTok{trie}\OperatorTok{::}\NormalTok{rt}\OperatorTok{[}\NormalTok{fa}\OperatorTok{[}\NormalTok{fa}\OperatorTok{[}\NormalTok{x}\OperatorTok{]]],}\NormalTok{ get}\OperatorTok{(}\NormalTok{fa}\OperatorTok{[}\NormalTok{x}\OperatorTok{]),} \DecValTok{0}\OperatorTok{);}
              \OperatorTok{\}}
  \NormalTok{            trie}\OperatorTok{::}\NormalTok{addall}\OperatorTok{(}\NormalTok{trie}\OperatorTok{::}\NormalTok{rt}\OperatorTok{[}\NormalTok{x}\OperatorTok{]);}
          \OperatorTok{\}} \ControlFlowTok{else} \ControlFlowTok{if}\OperatorTok{(}\NormalTok{opt }\OperatorTok{==} \DecValTok{2}\OperatorTok{)\{}
              \DataTypeTok{int}\NormalTok{ v }\OperatorTok{=}\NormalTok{ read}\OperatorTok{();}
              \ControlFlowTok{if}\OperatorTok{(}\NormalTok{x }\OperatorTok{!=}\NormalTok{ rt}\OperatorTok{)}\NormalTok{ trie}\OperatorTok{::}\NormalTok{erase}\OperatorTok{(}\NormalTok{trie}\OperatorTok{::}\NormalTok{rt}\OperatorTok{[}\NormalTok{fa}\OperatorTok{[}\NormalTok{x}\OperatorTok{]],}\NormalTok{ get}\OperatorTok{(}\NormalTok{x}\OperatorTok{),} \DecValTok{0}\OperatorTok{);}
  \NormalTok{            V}\OperatorTok{[}\NormalTok{x}\OperatorTok{]} \OperatorTok{{-}=}\NormalTok{ v}\OperatorTok{;}
              \ControlFlowTok{if}\OperatorTok{(}\NormalTok{x }\OperatorTok{!=}\NormalTok{ rt}\OperatorTok{)}\NormalTok{ trie}\OperatorTok{::}\NormalTok{insert}\OperatorTok{(}\NormalTok{trie}\OperatorTok{::}\NormalTok{rt}\OperatorTok{[}\NormalTok{fa}\OperatorTok{[}\NormalTok{x}\OperatorTok{]],}\NormalTok{ get}\OperatorTok{(}\NormalTok{x}\OperatorTok{),} \DecValTok{0}\OperatorTok{);}
          \OperatorTok{\}} \ControlFlowTok{else} \OperatorTok{\{}
              \DataTypeTok{int}\NormalTok{ res }\OperatorTok{=} \DecValTok{0}\OperatorTok{;}
  \NormalTok{            res }\OperatorTok{=}\NormalTok{ trie}\OperatorTok{::}\NormalTok{xorv}\OperatorTok{[}\NormalTok{trie}\OperatorTok{::}\NormalTok{rt}\OperatorTok{[}\NormalTok{x}\OperatorTok{]];}
  \NormalTok{            res }\OperatorTok{\^{}=}\NormalTok{ get}\OperatorTok{(}\NormalTok{fa}\OperatorTok{[}\NormalTok{x}\OperatorTok{]);}
  \NormalTok{            printf}\OperatorTok{(}\StringTok{"}\SpecialCharTok{\%d\textbackslash{}n}\StringTok{"}\OperatorTok{,}\NormalTok{ res}\OperatorTok{);}
          \OperatorTok{\}}
      \OperatorTok{\}}
      \BuiltInTok{std::}\NormalTok{cerr }\OperatorTok{\textless{}\textless{}} \StringTok{"}\SpecialCharTok{\textbackslash{}n\textbackslash{}n}\StringTok{Time:  "} \OperatorTok{\textless{}\textless{}}\NormalTok{ clock}\OperatorTok{()} \OperatorTok{{-}}\NormalTok{ c1 }\OperatorTok{\textless{}\textless{}} \StringTok{"  ms"} \OperatorTok{\textless{}\textless{}} \BuiltInTok{std::}\NormalTok{endl}\OperatorTok{;}
      \ControlFlowTok{return} \DecValTok{0}\OperatorTok{;}
  \OperatorTok{\}}
  \end{Highlighting}
  \end{Shaded}
  
  
  \end{document}
[INFO] [makePDF] LaTeX run number 1
[INFO] [makePDF] LaTeX output
  This is XeTeX, Version 3.141592653-2.6-0.999995 (TeX Live 2023/Debian) (preloaded format=xelatex)
   restricted \write18 enabled.
  entering extended mode
  (.../input.tex
  LaTeX2e <2023-11-01> patch level 1
  L3 programming layer <2024-01-22>
  (.../article.cls
  Document Class: article 2023/05/17 v1.4n Standard LaTeX document class
  (.../[system]
  (.../xcolor.sty
  (.../color.cfg)
  (.../xetex.def)
  (.../[system]
  (.../geometry.sty
  (.../keyval.sty)
  (.../ifvtex.sty
  (.../iftex.sty)))
  (.../amsmath.sty
  For additional information on amsmath, use the `?' option.
  (.../amstext.sty
  (.../amsgen.sty))
  (.../amsbsy.sty)
  (.../amsopn.sty))
  (.../amssymb.sty
  (.../amsfonts.sty))
  (.../unicode-math.sty
  (.../expl3.sty
  (.../l3backend-xetex.def))
  (.../unicode-math-xetex.sty
  (.../xparse.sty)
  (.../l3keys2e.sty)
  (.../fontspec.sty
  (.../fontspec-xetex.sty
  (.../fontenc.sty)
  (.../fontspec.cfg)))
  (.../fix-cm.sty
  (.../ts1enc.def))
  (.../unicode-math-table.tex)))
  (.../lmodern.sty)
  (.../xeCJK.sty
  (.../ctexhook.sty)
  (.../xtemplate.sty)
  (.../xeCJK.cfg))
  (.../upquote.sty
  (.../textcomp.sty))
  (.../microtype.sty
  (.../etoolbox.sty)
  (.../microtype-xetex.def)
  (.../microtype.cfg))
  (.../setspace.sty)
  (.../parskip.sty
  (.../kvoptions.sty
  (.../ltxcmds.sty)
  (.../kvsetkeys.sty)))
  (.../fancyvrb.sty)
  (.../bookmark.sty
  (.../hyperref.sty
  (.../kvdefinekeys.sty)
  (.../pdfescape.sty
  (.../pdftexcmds.sty
  (.../infwarerr.sty)))
  (.../hycolor.sty)
  (.../auxhook.sty)
  (.../nameref.sty
  (.../refcount.sty)
  (.../gettitlestring.sty))
  (.../pd1enc.def)
  (.../intcalc.sty)
  (.../puenc.def)
  (.../url.sty)
  (.../bitset.sty
  (.../bigintcalc.sty))
  (.../atbegshi-ltx.sty))
  (.../hxetex.def
  (.../stringenc.sty)
  (.../rerunfilecheck.sty
  (.../atveryend-ltx.sty)
  (.../uniquecounter.sty)))
  (.../bkm-dvipdfm.def))
  (.../xurl.sty)
  No file input.aux.
  *geometry* driver: auto-detecting
  *geometry* detected driver: xetex
  (.../mt-LatinModernRoman.cfg)
  
  Package hyperref Warning: Rerun to get /PageLabels entry.
  
  (.../omllmm.fd)
  (.../umsa.fd)
  (.../mt-msa.cfg)
  (.../umsb.fd)
  (.../mt-msb.cfg)
  
  LaTeX Font Warning: Font shape `TU/ARPLUKaiCN(0)/b/n' undefined
  (Font)              using `TU/ARPLUKaiCN(0)/m/n' instead on input line 132.
  
  
  Package xeCJK Warning: Unknown CJK family `\CJKttdefault' is being ignored.
  (xeCJK)                
  (xeCJK)                Try to use `\setCJKmonofont[<...>]{<...>}' to define
  (xeCJK)                it.
  
  
  LaTeX Font Warning: Font shape `TU/ARPLUKaiCN(0)/m/it' undefined
  (Font)              using `TU/ARPLUKaiCN(0)/m/n' instead on input line 162.
  
  [1] [2] [3] [4] [5] (.../input.aux)
  
  LaTeX Font Warning: Some font shapes were not available, defaults substituted.
  
  
  LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.
  
   )
  Output written on .../input.pdf (5 pages).
  Transcript written on .../input.log.
[INFO] [makePDF] Rerun needed
  Package hyperref Warning: Rerun to get /PageLabels entry.
  LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.
[INFO] [makePDF] LaTeX run number 2
[INFO] [makePDF] LaTeX output
  This is XeTeX, Version 3.141592653-2.6-0.999995 (TeX Live 2023/Debian) (preloaded format=xelatex)
   restricted \write18 enabled.
  entering extended mode
  (.../input.tex
  LaTeX2e <2023-11-01> patch level 1
  L3 programming layer <2024-01-22>
  (.../article.cls
  Document Class: article 2023/05/17 v1.4n Standard LaTeX document class
  (.../[system]
  (.../xcolor.sty
  (.../color.cfg)
  (.../xetex.def)
  (.../[system]
  (.../geometry.sty
  (.../keyval.sty)
  (.../ifvtex.sty
  (.../iftex.sty)))
  (.../amsmath.sty
  For additional information on amsmath, use the `?' option.
  (.../amstext.sty
  (.../amsgen.sty))
  (.../amsbsy.sty)
  (.../amsopn.sty))
  (.../amssymb.sty
  (.../amsfonts.sty))
  (.../unicode-math.sty
  (.../expl3.sty
  (.../l3backend-xetex.def))
  (.../unicode-math-xetex.sty
  (.../xparse.sty)
  (.../l3keys2e.sty)
  (.../fontspec.sty
  (.../fontspec-xetex.sty
  (.../fontenc.sty)
  (.../fontspec.cfg)))
  (.../fix-cm.sty
  (.../ts1enc.def))
  (.../unicode-math-table.tex)))
  (.../lmodern.sty)
  (.../xeCJK.sty
  (.../ctexhook.sty)
  (.../xtemplate.sty)
  (.../xeCJK.cfg))
  (.../upquote.sty
  (.../textcomp.sty))
  (.../microtype.sty
  (.../etoolbox.sty)
  (.../microtype-xetex.def)
  (.../microtype.cfg))
  (.../setspace.sty)
  (.../parskip.sty
  (.../kvoptions.sty
  (.../ltxcmds.sty)
  (.../kvsetkeys.sty)))
  (.../fancyvrb.sty)
  (.../bookmark.sty
  (.../hyperref.sty
  (.../kvdefinekeys.sty)
  (.../pdfescape.sty
  (.../pdftexcmds.sty
  (.../infwarerr.sty)))
  (.../hycolor.sty)
  (.../auxhook.sty)
  (.../nameref.sty
  (.../refcount.sty)
  (.../gettitlestring.sty))
  (.../pd1enc.def)
  (.../intcalc.sty)
  (.../puenc.def)
  (.../url.sty)
  (.../bitset.sty
  (.../bigintcalc.sty))
  (.../atbegshi-ltx.sty))
  (.../hxetex.def
  (.../stringenc.sty)
  (.../rerunfilecheck.sty
  (.../atveryend-ltx.sty)
  (.../uniquecounter.sty)))
  (.../bkm-dvipdfm.def))
  (.../xurl.sty)
  (.../input.aux)
  *geometry* driver: auto-detecting
  *geometry* detected driver: xetex
  (.../mt-LatinModernRoman.cfg)
  (.../omllmm.fd)
  (.../umsa.fd)
  (.../mt-msa.cfg)
  (.../umsb.fd)
  (.../mt-msb.cfg)
  
  LaTeX Font Warning: Font shape `TU/ARPLUKaiCN(0)/b/n' undefined
  (Font)              using `TU/ARPLUKaiCN(0)/m/n' instead on input line 132.
  
  
  Package xeCJK Warning: Unknown CJK family `\CJKttdefault' is being ignored.
  (xeCJK)                
  (xeCJK)                Try to use `\setCJKmonofont[<...>]{<...>}' to define
  (xeCJK)                it.
  
  
  LaTeX Font Warning: Font shape `TU/ARPLUKaiCN(0)/m/it' undefined
  (Font)              using `TU/ARPLUKaiCN(0)/m/n' instead on input line 162.
  
  [1] [2] [3] [4] [5] (.../input.aux)
  
  LaTeX Font Warning: Some font shapes were not available, defaults substituted.
  
   )
  Output written on .../input.pdf (5 pages).
  Transcript written on .../input.log.
</pre>
                                            </details>
                    
                                    </div>
                                </article>
                

                

                

                

            

                
                        </div>
                    </main>
            </div>

                <!-- Footer -->
                <footer id="footer">
                    <p>© 2025 ShuYuMo's Blog by Jiayi Su. All rights reserved.</p>  Powered by <b>MonoPy</b> - Single-Script Blog Generator in Python.
                </footer>
            </div>
        </div>
        
        <!-- Back to top button -->
        <button id="back-to-top" 
                aria-label="Back to top" 
                title="Back to top"
                style="display: none;">
            ↑
        </button>
        
        <!-- JavaScript -->
        <script>
            // Back to top functionality
            (function() {
                const backToTopButton = document.getElementById('back-to-top');
                const scrollThreshold = 300;
                
                function toggleBackToTop() {
                    if (window.scrollY > scrollThreshold) {
                        backToTopButton.style.display = 'block';
                    } else {
                        backToTopButton.style.display = 'none';
                    }
                }
                
                function scrollToTop() {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                }
                
                window.addEventListener('scroll', toggleBackToTop);
                backToTopButton.addEventListener('click', scrollToTop);
            })();
            
            // Clean up redundant spans in code blocks
            document.querySelectorAll('pre code').forEach(codeBlock => {
                // Find all line spans
                const lineSpans = codeBlock.querySelectorAll('span[id^="cb"]');
                
                lineSpans.forEach(lineSpan => {
                    // Check if this line has nested spans that can be simplified
                    const children = Array.from(lineSpan.childNodes);
                    
                    // Skip the anchor link (first child is usually the line number anchor)
                    let contentStart = 0;
                    if (children[0] && children[0].tagName === 'A') {
                        contentStart = 1;
                    }
                    
                    // If there's only one span child after the anchor, unwrap it
                    const contentChildren = children.slice(contentStart);
                    if (contentChildren.length === 1 && contentChildren[0].tagName === 'SPAN') {
                        const spanChild = contentChildren[0];
                        // Move the span's contents directly to the line span
                        while (spanChild.firstChild) {
                            lineSpan.insertBefore(spanChild.firstChild, spanChild);
                        }
                        // Remove the now-empty span
                        spanChild.remove();
                    }
                });
            });
            
            // Code copy functionality
            document.querySelectorAll('pre code').forEach(block => {
                const button = document.createElement('button');
                button.className = 'copy-button';
                button.textContent = 'Copy';
                button.setAttribute('aria-label', 'Copy code to clipboard');
                
                button.addEventListener('click', function() {
                    navigator.clipboard.writeText(block.textContent).then(() => {
                        button.textContent = 'Copied!';
                        setTimeout(() => button.textContent = 'Copy', 2000);
                    }).catch(() => {
                        // Fallback for older browsers
                        const textArea = document.createElement('textarea');
                        textArea.value = block.textContent;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        button.textContent = 'Copied!';
                        setTimeout(() => button.textContent = 'Copy', 2000);
                    });
                });
                
                const pre = block.parentNode;
                pre.style.position = 'relative';
                pre.appendChild(button);
            });
        </script>
    </body>
</html>